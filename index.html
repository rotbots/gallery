<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ROTBOTS_GALLERY</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'JetBrains Mono',monospace;background:#000;color:#fff;padding:20px;line-height:1.6}
.container{max-width:1600px;margin:0 auto}
header{text-align:left;padding:30px;margin-bottom:30px;background:#0a0a0a;border:1px solid #222}
h1{font-size:1.8em;color:#fff;margin-bottom:5px}
.subtitle{color:#888;font-size:0.9em}
.models{color:#666;font-size:0.8em;margin-top:8px}
.stats{display:flex;gap:20px;margin-top:20px;flex-wrap:wrap}
.stat{background:#111;padding:10px 15px;border:1px solid #222}
.stat-value{font-size:1.3em;color:#fff;font-weight:bold}
.stat-label{color:#888;font-size:0.8em;text-transform:uppercase}
.playlist-section{background:#0a0a0a;border:1px solid #222;padding:20px;margin-bottom:30px}
.playlist-section h2{color:#fff;margin-bottom:15px;font-size:1.2em}
.playlist-container{position:relative;background:#000;aspect-ratio:9/16;max-width:400px;margin:0 auto;border:1px solid #333;display:flex;align-items:center;justify-content:center}
.playlist-video{width:100%;height:100%;object-fit:contain}
.playlist-controls{display:flex;gap:10px;margin-top:10px;justify-content:center}
.playlist-btn{background:#111;border:1px solid #333;color:#fff;padding:8px 16px;cursor:pointer;font-family:monospace;font-size:0.9em}
.playlist-btn:hover{background:#333;border-color:#fff}
.playlist-info{text-align:center;margin-top:10px;color:#888;font-size:0.85em}
.gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-top:20px}
.video-card{background:#0a0a0a;border:1px solid #222;overflow:hidden;transition:border-color 0.3s;display:flex;flex-direction:column}
.video-card:hover{border-color:#444}
.video-preview{aspect-ratio:9/16;max-height:380px;background:#000;display:flex;align-items:center;justify-content:center;overflow:hidden}
.video-preview video{max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain}
.placeholder{color:#333;font-size:3em}
.card-content{padding:15px;border-top:1px solid #222}
.card-title{font-size:0.95em;color:#fff;margin-bottom:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.card-meta{display:flex;gap:6px;margin-bottom:12px;flex-wrap:wrap}
.meta-tag{font-size:0.7em;padding:3px 8px;border:1px solid;background:transparent}
.source{color:#4CAF50;border-color:#4CAF50}
.style{color:#888;border-color:#888}
.creator{color:#ffaa00;border-color:#ffaa00}
.date{color:#666;border-color:#444}
.card-actions{display:flex;gap:8px}
.btn{flex:1;padding:8px;border:1px solid;background:transparent;font-size:0.8em;text-decoration:none;text-align:center;cursor:pointer;font-family:monospace;transition:all 0.2s}
.btn-primary{border-color:#fff;color:#fff}
.btn-primary:hover{background:#fff;color:#000}
.btn-secondary{border-color:#666;color:#888}
.btn-secondary:hover{background:#333;color:#fff;border-color:#fff}
.empty{text-align:center;padding:60px 20px;color:#444}
footer{text-align:center;padding:30px;color:#666;font-size:0.8em;border-top:1px solid #222;margin-top:40px}
</style>
</head>
<body>
<div class="container">
<header>
<h1>ROTBOTS_GALLERY</h1>
<p class="subtitle">Daisychain result archive</p>
<p class="models">LTX-2 19B | Groq Llama-3.1 | fal.ai FFmpeg | Jina Reader</p>
<div class="stats">
<div class="stat"><div class="stat-value" id="tv">0</div><div class="stat-label">Videos</div></div>
<div class="stat"><div class="stat-value" id="td">0s</div><div class="stat-label">Runtime</div></div>
</div>
</header>
<section class="playlist-section" id="playlist-section">
<h2>Continuous Stream</h2>
<div class="playlist-container">
<video id="playlist-video" class="playlist-video" controls playsinline></video>
</div>
<div class="playlist-controls">
<button class="playlist-btn" onclick="playlistPrev()">&larr; Previous</button>
<button class="playlist-btn" onclick="playlistNext()">Next &rarr;</button>
</div>
<div class="playlist-info" id="playlist-info">Loading...</div>
</section>
<div class="gallery" id="g"></div>
<div class="empty" id="e"><h2>No videos yet</h2></div>
<footer><p>Daisychain v5.2</p></footer>
</div>
<script>
var videos = [{"id":"2026-01-13T16-50-23","title":"Winnie-the-Pooh","sourceType":"Wikipedia","storyboardStyle":"Brainrot (exaggerated, chaotic, meme-style)","videoPromptStyle":"Zoom in/out (dramatic reveal)","creatorName":"Bambzoe","timestamp":"2026-01-13T16:50:23.111Z","mergedUrl":"https://v3b.fal.media/files/b/0a8a3f2d/HXE--vEYqkespxICbqhYM_merged_video.mp4","mergeFailed":false,"clip1Url":"https://v3b.fal.media/files/b/0a8a3f22/3FcV819XuRduSEOqOqAfE_x2Fk8nfi.mp4","clip2Url":"https://v3b.fal.media/files/b/0a8a3f25/GeKaCGS1eKhKXHi7J11j6_OvupKBDl.mp4","clip3Url":"https://v3b.fal.media/files/b/0a8a3f27/zkoOld20sryeXJED0PeyB_GBmwR8Xs.mp4","clip4Url":"https://v3b.fal.media/files/b/0a8a3f2a/VnlNe2EXoWt_tALh-8zp5_8FBfHuFd.mp4","reportUrl":"https://rotbots.github.io/gallery/reports/2026-01-13T16-50-23-winnie-the-pooh.html","reportFilename":"reports/2026-01-13T16-50-23-winnie-the-pooh.html"}];
var currentPlaylistIndex = 0;
var playlistPlayer = null;

function esc(s) {
  return String(s || '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
}

function initPlaylist() {
  playlistPlayer = document.getElementById('playlist-video');
  if (!playlistPlayer || videos.length === 0) return;
  var playableVideos = videos.filter(function(v) { return v.mergedUrl; });
  if (playableVideos.length === 0) {
    document.getElementById('playlist-section').style.display = 'none';
    return;
  }
  playlistPlayer.src = playableVideos[0].mergedUrl;
  updatePlaylistInfo();
  playlistPlayer.onended = function() {
    currentPlaylistIndex = (currentPlaylistIndex + 1) % playableVideos.length;
    playlistPlayer.src = playableVideos[currentPlaylistIndex].mergedUrl;
    playlistPlayer.play();
    updatePlaylistInfo();
  };
}

function updatePlaylistInfo() {
  var playableVideos = videos.filter(function(v) { return v.mergedUrl; });
  var info = document.getElementById('playlist-info');
  if (info && playableVideos[currentPlaylistIndex]) {
    info.textContent = 'Now playing: ' + (playableVideos[currentPlaylistIndex].title || 'Untitled') + ' (' + (currentPlaylistIndex + 1) + '/' + playableVideos.length + ')';
  }
}

function playlistPrev() {
  var playableVideos = videos.filter(function(v) { return v.mergedUrl; });
  if (playableVideos.length === 0) return;
  currentPlaylistIndex = (currentPlaylistIndex - 1 + playableVideos.length) % playableVideos.length;
  playlistPlayer.src = playableVideos[currentPlaylistIndex].mergedUrl;
  playlistPlayer.play();
  updatePlaylistInfo();
}

function playlistNext() {
  var playableVideos = videos.filter(function(v) { return v.mergedUrl; });
  if (playableVideos.length === 0) return;
  currentPlaylistIndex = (currentPlaylistIndex + 1) % playableVideos.length;
  playlistPlayer.src = playableVideos[currentPlaylistIndex].mergedUrl;
  playlistPlayer.play();
  updatePlaylistInfo();
}

function render() {
  document.getElementById('tv').textContent = videos.length;
  document.getElementById('td').textContent = (videos.length * 16) + 's';
  if (videos.length === 0) {
    document.getElementById('e').style.display = 'block';
    document.getElementById('g').style.display = 'none';
    document.getElementById('playlist-section').style.display = 'none';
    return;
  }
  document.getElementById('e').style.display = 'none';
  document.getElementById('g').style.display = 'grid';
  var h = '';
  for (var i = 0; i < videos.length; i++) {
    var v = videos[i];
    var vid = v.mergedUrl 
      ? '<video src="' + v.mergedUrl + '" controls muted playsinline></video>'
      : '<div class="placeholder">[No video]</div>';
    var wb = v.mergedUrl
      ? '<a href="' + v.mergedUrl + '" target="_blank" class="btn btn-primary">Watch</a>'
      : '';
    var st = (v.storyboardStyle || '').split(' ')[0] || 'Default';
    var cr = v.creatorName || 'Anonymous';
    var dt = v.timestamp ? new Date(v.timestamp).toLocaleDateString() : '';
    h += '<div class="video-card">';
    h += '<div class="video-preview">' + vid + '</div>';
    h += '<div class="card-content">';
    h += '<h3 class="card-title">' + esc(v.title) + '</h3>';
    h += '<div class="card-meta">';
    h += '<span class="meta-tag source">' + esc(v.sourceType) + '</span>';
    h += '<span class="meta-tag style">' + esc(st) + '</span>';
    h += '<span class="meta-tag creator">' + esc(cr) + '</span>';
    h += '<span class="meta-tag date">' + dt + '</span>';
    h += '</div>';
    h += '<div class="card-actions">' + wb;
    h += '<a href="' + v.reportUrl + '" target="_blank" class="btn btn-secondary">Details</a>';
    h += '</div></div></div>';
  }
  document.getElementById('g').innerHTML = h;
  initPlaylist();
}
render();
</script>
</body>
</html>